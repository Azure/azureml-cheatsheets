<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<link rel="search" type="application/opensearchdescription+xml" title="Azure Machine Learning (AML)" href="/azureml-web/opensearch.xml"><title data-react-helmet="true">Data | Azure Machine Learning (AML)</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Data | Azure Machine Learning (AML)"><meta data-react-helmet="true" name="description" content="Guide to working with data in Azure ML."><meta data-react-helmet="true" property="og:description" content="Guide to working with data in Azure ML."><meta data-react-helmet="true" name="keywords" content="data,dataset,datastore"><meta data-react-helmet="true" property="og:url" content="https://github.com/Azure//azureml-web/docs/cheatsheet/data"><link data-react-helmet="true" rel="shortcut icon" href="/azureml-web/img/logo.svg"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://github.com/Azure//azureml-web/docs/cheatsheet/data"><link rel="stylesheet" href="/azureml-web/styles.c6593691.css">
<link rel="preload" href="/azureml-web/styles.f0e101fb.js" as="script">
<link rel="preload" href="/azureml-web/runtime~main.97c1491e.js" as="script">
<link rel="preload" href="/azureml-web/main.0988fddc.js" as="script">
<link rel="preload" href="/azureml-web/1.250fdb9e.js" as="script">
<link rel="preload" href="/azureml-web/2.21a9efc2.js" as="script">
<link rel="preload" href="/azureml-web/3.c6a73dda.js" as="script">
<link rel="preload" href="/azureml-web/1be78505.6d1a0a67.js" as="script">
<link rel="preload" href="/azureml-web/49.d6f1ac6b.js" as="script">
<link rel="preload" href="/azureml-web/935f2afb.5149d728.js" as="script">
<link rel="preload" href="/azureml-web/17896441.c07cd1f6.js" as="script">
<link rel="preload" href="/azureml-web/927c72f8.d637dadf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/azureml-web/"><img class="navbar__logo" src="/azureml-web/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">Azure Machine Learning</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/azureml-web/docs/cheatsheet/">Cheat Sheet</a><a class="navbar__item navbar__link" href="/azureml-web/docs/vs-code-snippets/snippets">Snippets</a><a class="navbar__item navbar__link" href="/azureml-web/docs/templates/">Templates</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Azure/azureml-examples" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub Examples</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/azureml-web/"><img class="navbar__logo" src="/azureml-web/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">Azure Machine Learning</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/azureml-web/docs/cheatsheet/">Cheat Sheet</a></li><li class="menu__list-item"><a class="menu__link" href="/azureml-web/docs/vs-code-snippets/snippets">Snippets</a></li><li class="menu__list-item"><a class="menu__link" href="/azureml-web/docs/templates/">Templates</a></li><li class="menu__list-item"><a href="https://github.com/Azure/azureml-examples" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub Examples</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Menu</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/azureml-web/docs/cheatsheet/">Cheat Sheet</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/azureml-web/docs/cheatsheet/installation">Installation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Basic Assets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/azureml-web/docs/cheatsheet/workspace">Workspace</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/azureml-web/docs/cheatsheet/compute-targets">Compute Target</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/azureml-web/docs/cheatsheet/environment">Environment</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/azureml-web/docs/cheatsheet/data">Data</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Submitting Code</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/azureml-web/docs/cheatsheet/script-run-config">Running Code in the Cloud</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/azureml-web/docs/cheatsheet/logging">Metrics</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Advanced Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/azureml-web/docs/cheatsheet/distributed-training">Distributed GPU Training</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/azureml-web/docs/cheatsheet/docker-build">Azure ML Containers</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Data</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="concepts"></a>Concepts<a aria-hidden="true" tabindex="-1" class="hash-link" href="#concepts" title="Direct link to heading">#</a></h2><p>AzureML provides two basic assets for working with data:</p><ul><li>Datastore</li><li>Dataset</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="datastore"></a>Datastore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#datastore" title="Direct link to heading">#</a></h3><p>Provides an interface for numerous Azure Machine Learning storage accounts.</p><p>Each Azure ML workspace comes with a default datastore:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> azureml</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">core </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Workspace</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ws </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Workspace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">datastore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get_default_datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>which can also be accessed directly from the <a href="https://portal.azure.com" target="_blank" rel="noopener noreferrer">Azure Portal</a> (under the same
resource group as your Azure ML Workspace).</p><p>Datastores are attached to workspaces and are used to store connection information to Azure storage services so you can refer to them by name and don&#x27;t need to remember the connection information and secret used to connect to the storage services.</p><p>Use this class to perform management operations, including register, list, get, and remove datastores.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="dataset"></a>Dataset<a aria-hidden="true" tabindex="-1" class="hash-link" href="#dataset" title="Direct link to heading">#</a></h3><p>A dataset is a reference to data - either in a datastore or behind a public URL.</p><p>Datasets provide enhaced capabilities including data lineage (with the notion of versioned datasets).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="get-datastore"></a>Get Datastore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#get-datastore" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="default-datastore"></a>Default datastore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#default-datastore" title="Direct link to heading">#</a></h3><p>Each workspace comes with a default datastore.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">datastore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get_default_datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="register-datastore"></a>Register datastore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#register-datastore" title="Direct link to heading">#</a></h3><p>Connect to, or create, a datastore backed by one of the multiple data-storage options
that Azure provides. For example:</p><ul><li>Azure Blob Container</li><li>Azure Data Lake (Gen1 or Gen2)</li><li>Azure File Share</li><li>Azure MySQL</li><li>Azure PostgreSQL</li><li>Azure SQL</li><li>Azure Databricks File System</li></ul><p>See the SDK for a comprehensive list of datastore types and authentication options:
<a href="https://docs.microsoft.com/python/api/azureml-core/azureml.core.datastore(class)?view=azure-ml-py" target="_blank" rel="noopener noreferrer">Datastores (SDK)</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="register-a-new-datastore"></a>Register a new datastore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#register-a-new-datastore" title="Direct link to heading">#</a></h4><ul><li><p>To register a store via an <strong>account key</strong>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">datastores </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">register_azure_blob_container</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    workspace</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    datastore_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;datastore-name&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;container-name&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    account_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;account-name&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    account_key</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;account-key&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div></li><li><p>To register a store via a <strong>SAS token</strong>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">datastores </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">register_azure_blob_container</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    workspace</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    datastore_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;datastore-name&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;container-name&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    account_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;account-name&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sas_token</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;sas-token&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="connect-to-datastore"></a>Connect to datastore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#connect-to-datastore" title="Direct link to heading">#</a></h3><p>The workspace object <code>ws</code> has  access to its datastores via</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">datastores</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div></div></div><p>Any datastore that is registered to workspace can thus be accessed by name.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">datastore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">datastores</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;name-of-registered-datastore&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="link-datastore-to-azure-storage-explorer"></a>Link datastore to Azure Storage Explorer<a aria-hidden="true" tabindex="-1" class="hash-link" href="#link-datastore-to-azure-storage-explorer" title="Direct link to heading">#</a></h3><p>The workspace object <code>ws</code> is a very powerful handle when it comes to managing assets the
workspace has access to. For example, we can use the workspace to connect to a datastore
in Azure Storage Explorer.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> azureml</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">core </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Workspace</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ws </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Workspace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">datastore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">datastores</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;name-of-datastore&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div></div></div><ul><li><p>For a datastore that was created using an <strong>account key</strong> we can use:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">account_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> account_key </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">account_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">account_key</span></div></div></div></div></div></li><li><p>For a datastore that was created using a <strong>SAS token</strong> we can use:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sas_token </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sas_token</span></div></div></div></div></div></li></ul><p>The account_name and account_key can then be used directly in Azure Storage Explorer to
connect to the Datastore.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="blob-datastore"></a>Blob Datastore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#blob-datastore" title="Direct link to heading">#</a></h2><p>Move data to and from your <a href="https://docs.microsoft.com/python/api/azureml-core/azureml.data.azure_storage_datastore.azureblobdatastore?view=azure-ml-py" target="_blank" rel="noopener noreferrer">AzureBlobDatastore</a> object <code>datastore</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="upload-to-blob-datastore"></a>Upload to Blob Datastore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#upload-to-blob-datastore" title="Direct link to heading">#</a></h3><p>The AzureBlobDatastore provides APIs for data upload:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">upload</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    src_dir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./data&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target_path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;path/on/datastore&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    overwrite</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>Alternatively, if you are working with multiple files in different locations you can use</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">upload_files</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    files</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># List[str] of absolute paths of files to upload</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target_path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;path/on/datastore&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    overwrite</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="download-from-blob-datastore"></a>Download from Blob Datastore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#download-from-blob-datastore" title="Direct link to heading">#</a></h3><p>Download the data from the blob container to the local file system.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">download</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target_path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># str: local directory to download to</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    prefix</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;path/on/datastore&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    overwrite</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="via-storage-explorer"></a>Via Storage Explorer<a aria-hidden="true" tabindex="-1" class="hash-link" href="#via-storage-explorer" title="Direct link to heading">#</a></h3><p>Azure Storage Explorer is free tool to easily manage your Azure cloud storage
resources from Windows, macOS, or Linux. Download it from <a href="https://azure.microsoft.com/features/storage-explorer/" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Azure Storage Explorer gives you a (graphical) file exporer, so you can literally drag-and-drop
files into and out of your datastores.</p><p>See <a href="#link-datastore-to-azure-storage-explorer">&quot;Link datastore to Azure Storage Explorer&quot;</a>
above for more details.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="read-from-datastore"></a>Read from Datastore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#read-from-datastore" title="Direct link to heading">#</a></h2><p>Reference data in a <code>Datastore</code> in your code, for example to use in a remote setting.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="datareference"></a>DataReference<a aria-hidden="true" tabindex="-1" class="hash-link" href="#datareference" title="Direct link to heading">#</a></h3><p>First, connect to your basic assets: <code>Workspace</code>, <code>ComputeTarget</code> and <code>Datastore</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> azureml</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">core </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Workspace</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Workspace </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Workspace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compute_target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ComputeTarget </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">compute_targets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;compute-target-name&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Datastore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get_default_datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>Create a <code>DataReference</code>, either as mount:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">data_ref </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;path/on/datastore&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">as_mount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>or as download:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">data_ref </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;path/on/datastore&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">as_download</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>To mount a datastore the workspace need to have read and write access to the underlying storage. For readonly datastore <code>as_download</code> is the only option. </p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="consume-datareference-in-scriptrunconfig"></a>Consume DataReference in ScriptRunConfig<a aria-hidden="true" tabindex="-1" class="hash-link" href="#consume-datareference-in-scriptrunconfig" title="Direct link to heading">#</a></h4><p>Add this DataReference to a ScriptRunConfig as follows.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ScriptRunConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    source_directory</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    script</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;script.py&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    arguments</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_ref</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">               </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># returns environment variable $AZUREML_DATAREFERENCE_example_data</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    compute_target</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">compute_target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">run_config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data_references</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">data_ref</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data_reference_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> data_ref</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">to_config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>The command-line argument <code>str(data_ref)</code> returns the environment variable <code>$AZUREML_DATAREFERENCE_example_data</code>.
Finally, <code>data_ref.to_config()</code> instructs the run to mount the data to the compute target and to assign the
above environment variable appropriately.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="without-specifying-argument"></a>Without specifying argument<a aria-hidden="true" tabindex="-1" class="hash-link" href="#without-specifying-argument" title="Direct link to heading">#</a></h4><p>Specify a <code>path_on_compute</code> to reference your data without the need for command-line arguments.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">data_ref </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;path/on/datastore&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">as_mount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">data_ref</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">path_on_compute </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/tmp/data&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">config </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ScriptRunConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    source_directory</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    script</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;script.py&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    compute_target</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">compute_target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">run_config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data_references</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">data_ref</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data_reference_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> data_ref</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">to_config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="create-dataset"></a>Create Dataset<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-dataset" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="from-local-data"></a>From local data<a aria-hidden="true" tabindex="-1" class="hash-link" href="#from-local-data" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="upload-to-datastore"></a>Upload to datastore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#upload-to-datastore" title="Direct link to heading">#</a></h4><p>To upload a local directory <code>./data/</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">datastore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get_default_datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">upload</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">src_dir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./data&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> target_path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;path/on/datastore&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> overwrite</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>This will upload the entire directory <code>./data</code> from local to the default datastore associated
to your workspace <code>ws</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="create-dataset-from-files-in-datastore"></a>Create dataset from files in datastore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-dataset-from-files-in-datastore" title="Direct link to heading">#</a></h4><p>To create a dataset from a directory on a datastore at <code>&lt;path/on/datastore&gt;</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">datastore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get_default_datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dataset </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Dataset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_files</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">datastore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;path/on/datastore&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="use-dataset"></a>Use Dataset<a aria-hidden="true" tabindex="-1" class="hash-link" href="#use-dataset" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="scriptrunconfig"></a>ScriptRunConfig<a aria-hidden="true" tabindex="-1" class="hash-link" href="#scriptrunconfig" title="Direct link to heading">#</a></h3><p>To reference data from a dataset in a ScriptRunConfig you can either mount or download the
dataset using:</p><ul><li><code>dataset.as_mount(path_on_compute)</code> : mount dataset to a remote run</li><li><code>dataset.as_download(path_on_compute)</code> : download the dataset to a remote run</li></ul><p><strong>Path on compute</strong> Both <code>as_mount</code> and <code>as_download</code> accept an (optional) parameter <code>path_on_compute</code>.
This defines the path on the compute target where the data is made available.</p><ul><li>If <code>None</code>, the data will be downloaded into a temporary directory.</li><li>If <code>path_on_compute</code> starts with a <code>/</code> it will be treated as an <strong>absolute path</strong>. (If you have
specified an absolute path, please make sure that the job has permission to write to that directory.)</li><li>Otherwise it will be treated as relative to the working directory</li></ul><p>Reference this data in a remote run, for example in mount-mode:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">run.py</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">arguments</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">dataset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">as_mount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">config </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ScriptRunConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">source_directory</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> script</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;train.py&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> arguments</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">experiment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">submit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>and consumed in <code>train.py</code>:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">train.py</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> sys</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">data_dir </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> sys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;===== DATA =====&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;DATA PATH: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> data_dir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;LIST FILES IN DATA DIR...&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">os</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_dir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;================&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>For more details: <a href="/azureml-web/docs/cheatsheet/script-run-config">ScriptRunConfig</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Azure/azureml-web/tree/main/website/docs/cheatsheet/data.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/azureml-web/docs/cheatsheet/environment"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Environment</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/azureml-web/docs/cheatsheet/script-run-config"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Running Code in the Cloud Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#concepts" class="table-of-contents__link">Concepts</a><ul><li><a href="#datastore" class="table-of-contents__link">Datastore</a></li><li><a href="#dataset" class="table-of-contents__link">Dataset</a></li></ul></li><li><a href="#get-datastore" class="table-of-contents__link">Get Datastore</a><ul><li><a href="#default-datastore" class="table-of-contents__link">Default datastore</a></li><li><a href="#register-datastore" class="table-of-contents__link">Register datastore</a></li><li><a href="#connect-to-datastore" class="table-of-contents__link">Connect to datastore</a></li><li><a href="#link-datastore-to-azure-storage-explorer" class="table-of-contents__link">Link datastore to Azure Storage Explorer</a></li></ul></li><li><a href="#blob-datastore" class="table-of-contents__link">Blob Datastore</a><ul><li><a href="#upload-to-blob-datastore" class="table-of-contents__link">Upload to Blob Datastore</a></li><li><a href="#download-from-blob-datastore" class="table-of-contents__link">Download from Blob Datastore</a></li><li><a href="#via-storage-explorer" class="table-of-contents__link">Via Storage Explorer</a></li></ul></li><li><a href="#read-from-datastore" class="table-of-contents__link">Read from Datastore</a><ul><li><a href="#datareference" class="table-of-contents__link">DataReference</a></li></ul></li><li><a href="#create-dataset" class="table-of-contents__link">Create Dataset</a><ul><li><a href="#from-local-data" class="table-of-contents__link">From local data</a></li></ul></li><li><a href="#use-dataset" class="table-of-contents__link">Use Dataset</a><ul><li><a href="#scriptrunconfig" class="table-of-contents__link">ScriptRunConfig</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Reference</h4><ul class="footer__items"><li class="footer__item"><a href="https://docs.microsoft.com/azure/machine-learning" target="_blank" rel="noopener noreferrer" class="footer__link-item">Microsoft Docs</a></li><li class="footer__item"><a href="https://github.com/Azure/azureml-examples" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Examples</a></li><li class="footer__item"><a href="https://github.com/Azure/azureml-web" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Website</a></li><li class="footer__item"><a href="https://docs.microsoft.com/python/api/overview/azure/ml/?view=azure-ml-py" target="_blank" rel="noopener noreferrer" class="footer__link-item">Python SDK Docs</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Azure/azureml-examples/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub (Issues)</a></li><li class="footer__item"><a class="footer__link-item" href="/azureml-web/docs/issues">GitHub Issue Triage Process</a></li><li class="footer__item"><a href="https://stackoverflow.microsoft.com/questions/tagged/10888" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Coming soon...</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/azureml-web/blog">Blog</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Microsoft</div></div></div></footer></div>
<script src="/azureml-web/styles.f0e101fb.js"></script>
<script src="/azureml-web/runtime~main.97c1491e.js"></script>
<script src="/azureml-web/main.0988fddc.js"></script>
<script src="/azureml-web/1.250fdb9e.js"></script>
<script src="/azureml-web/2.21a9efc2.js"></script>
<script src="/azureml-web/3.c6a73dda.js"></script>
<script src="/azureml-web/1be78505.6d1a0a67.js"></script>
<script src="/azureml-web/49.d6f1ac6b.js"></script>
<script src="/azureml-web/935f2afb.5149d728.js"></script>
<script src="/azureml-web/17896441.c07cd1f6.js"></script>
<script src="/azureml-web/927c72f8.d637dadf.js"></script>
</body>
</html>